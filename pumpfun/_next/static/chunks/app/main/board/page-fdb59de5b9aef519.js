(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{11109:function(e,t,s){Promise.resolve().then(s.bind(s,72114))},72114:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return V}});var a=s(57437),r=s(2265),l=s(61396),i=s.n(l),n=s(85754),d=s(94544),c=s(83523),o=s(38904),m=s(62442),u=s(1657);let f=d.fC;d.ZA;let x=d.B4,p=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(d.xz,{ref:t,className:(0,u.cn)("flex h-10 w-full sm:w-fit items-center justify-between rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus:ring-slate-300",s),...l,children:[r,(0,a.jsx)(d.JO,{asChild:!0,children:(0,a.jsx)(c.Z,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=d.xz.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(d.u_,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})});h.displayName=d.u_.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(d.$G,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})});g.displayName=d.$G.displayName;let v=r.forwardRef((e,t)=>{let{className:s,children:r,position:l="popper",...i}=e;return(0,a.jsx)(d.h_,{children:(0,a.jsxs)(d.VY,{ref:e=>{null==e||e.addEventListener("touchstart",e=>e.preventDefault()),null==e||e.addEventListener("touchend",e=>e.preventDefault())},className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white text-slate-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...i,children:[(0,a.jsx)(h,{}),(0,a.jsx)(d.l_,{className:(0,u.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(g,{})]})})});v.displayName=d.VY.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(d.__,{ref:t,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=d.__.displayName;let j=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(d.ck,{ref:t,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(d.wU,{children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(d.eT,{children:r})]})});j.displayName=d.ck.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(d.Z0,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-slate-100 dark:bg-slate-800",s),...r})}).displayName=d.Z0.displayName;var b=s(78488),w=s(45179),N=s(27967);let _=()=>{let[e]=(0,N._)("include-nsfw",!1),[t,s]=(0,r.useState)(),[a,l]=(0,r.useState)(!1),i=async()=>{l(!0),s(await fetch("".concat("https://client-api-2-74b1891ee9f9.herokuapp.com","/coins/king-of-the-hill?includeNsfw=").concat(e)).then(e=>e.json())),l(!1)};return(0,r.useEffect)(()=>{i()},[e]),{king:t,loading:a}};var y=s(85429),k=s(63591),C=s(11400);let S=()=>{let{king:e,loading:t}=_(),{ipfsPrefix:s}=(0,y.useIpfsPrefix)();if(!e)return;let{name:r,symbol:l,description:n,image_uri:d,pfp:c,mint:o,twitter_username:m,sortValue:u,creator:f,show_name:x,usd_market_cap:p,king_of_the_hill_timestamp:h,raydium_pool:g,reply_count:v,nsfw:j,profile_image:b,username:w}=e,N=(d||"").replace("https://cf-ipfs.com/ipfs/",s);return(0,a.jsxs)("div",{className:"text-white max-w-[800px] grid gap-2",children:[(0,a.jsx)("img",{src:"/king-of-the-hill.png",alt:"king of the hill",className:"h-8 justify-self-center"}),(0,a.jsx)(i(),{href:"/".concat(o),children:(0,a.jsxs)("div",{className:"p-2 flex border border-transparent hover:border-white gap-2 w-full max-h-[300px] overflow-hidden",children:[(0,a.jsx)("div",{className:"min-w-20",children:(0,a.jsx)("img",{className:"mr-4 w-20 h-auto",src:N,alt:r})}),(0,a.jsxs)("div",{className:"gap-1 grid h-fit",children:[(0,a.jsxs)("div",{className:"text-xs text-blue-200 flex items-center gap-2",children:[(0,a.jsx)("div",{children:"Created by"}),(0,a.jsx)(C.E,{username:w,profile_image:b,address:f})]}),!!p&&(0,a.jsxs)("p",{className:"text-xs text-green-300 flex gap-1",children:["market cap: ".concat(Number(p/1e3).toFixed(2),"K"),(h||g)&&(0,a.jsxs)("div",{className:"flex text-green-500",children:["[badge:"," ",g&&(0,a.jsx)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,a.jsx)(k.C,{image:"/migrated.png",alt:"raydium badge"})}),h&&(0,a.jsx)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,a.jsx)(k.C,{image:"/king.png",alt:"king of the hill badge"})}),"]"]})]}),(0,a.jsxs)("p",{className:"text-xs flex items-center gap-2",children:["replies: ",v||0,j&&(0,a.jsx)("span",{className:"text-red-400",children:"[NSFW]"})]}),(0,a.jsxs)("p",{className:"text-sm w-full font-bold",children:[r," [ticker: ",l,"]"]})]})]})})]})};var E=s(67334),P=s(57042),Z=s(18069),O=s(80323);let R=()=>{let{address:e}=(0,O.useProfile)(),[t,s]=(0,r.useState)(!1),[a,l]=(0,r.useState)([]),i=async()=>{if(e){s(!0);try{let t=await fetch("".concat("https://client-api-2-74b1891ee9f9.herokuapp.com","/timeline/").concat(e)).then(e=>e.json());l(t)}catch(e){console.error(e)}finally{s(!1)}}};return(0,r.useEffect)(()=>{i()},[e]),{feed:a,loading:t}};var D=s(62545),I=s(68368),T=s(56662),z=s(97226);let A=e=>{let{trade:t}=e,{ipfsPrefix:s}=(0,y.useIpfsPrefix)(),{mint:r,name:l,symbol:n,description:d,image_uri:c,username:o,profile_image:m,is_buy:u,sol_amount:f,user:x}=t,p=c.replace("https://cf-ipfs.com/ipfs/",s);return(0,a.jsx)(i(),{href:"/".concat(r),children:(0,a.jsxs)("div",{className:"max-h-[300px] overflow-hidden h-fit p-2 flex border border-transparent hover:border-white gap-2 w-full text-gray-400",children:[(0,a.jsx)("div",{className:"min-w-32",children:(0,a.jsx)("img",{className:"mr-4 w-32 h-auto",src:p,alt:l})}),(0,a.jsxs)("div",{className:"gap-1 grid h-fit",children:[(0,a.jsxs)("div",{className:(0,P.Z)("text-xs flex items-start w-fit flex-wrap",u?"text-green-300":"text-red-300"),children:[(0,a.jsx)(C.E,{username:o,profile_image:m,address:x}),(0,a.jsxs)("div",{children:[u?"bought":"sold"," ",(0,I.s)(new T.BN(f)).toFixed(4)," SOL"]})]}),(0,a.jsxs)("p",{className:"text-sm w-full",style:{overflowWrap:"break-word",wordBreak:"break-all"},children:[(0,a.jsxs)("span",{className:"font-bold",children:[l," (ticker: ",n,"):"," "]}),d]})]})]})})},L=()=>{let{address:e}=(0,O.useProfile)(),{feed:t,loading:s}=R();return(0,a.jsxs)("div",{className:"grid gap-4 text-white",children:[!t.length&&e&&(0,a.jsx)("div",{children:"Follow some of your friends to start curating your feed"}),e&&(0,a.jsx)(z.V,{address:e}),!e&&(0,a.jsx)("div",{children:"Connect your wallet to see a feed of your friends"}),s?(0,a.jsxs)("div",{className:"flex gap-2 text-white items-center",children:["Loading... ",(0,a.jsx)(D.iT,{color:"white",height:20,width:20})]}):(0,a.jsx)("div",{className:"grid grid-col-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,a.jsx)(A,{trade:e},e.signature))})]})};function V(){let[e,t]=(0,r.useState)("last_trade_timestamp"),[s,l]=(0,r.useState)("DESC"),[d,c]=(0,r.useState)(""),[o,m]=(0,r.useState)(0),[u,h]=(0,N._)("include-nsfw",!1),[g,_]=(0,N._)("selected-feed","terminal"),{coins:k,setCoins:C}=(0,b.Y)({sort:e,order:s,offset:o,limit:50,searchTerm:d,includeNsfw:u}),{latestTrade:O}=(0,E.A)(),R=(0,r.useRef)(null),[D,I]=(0,r.useState)(null),{ipfsPrefix:T}=(0,y.useIpfsPrefix)(),[z,A]=(0,N._)("show-animations",!0);return(0,r.useEffect)(()=>{if("last_trade_timestamp"===e&&O&&R.current!==O&&(!O.nsfw||u&&O.nsfw)&&0===o&&"DESC"===s&&z){if(!(""===d||O.name.includes(d)||O.symbol.includes(d)||O.mint.includes(d)))return;let e=k.findIndex(e=>e.mint===O.mint),a=[...k];if(-1!==e){let[t]=a.splice(e,1);"DESC"===s?a.unshift(t):a.push(t)}else{var t;let e={name:O.name,symbol:O.symbol,description:O.description,image_uri:null===(t=O.image_uri)||void 0===t?void 0:t.replace("https://cf-ipfs.com/ipfs/",T),pfp:O.CreatorPfp,creator:O.creator,creator_username:O.creator_username,creator_profile_image:O.creator_profile_image,mint:O.mint,twitter_username:O.CreatorTwitterUsername,sortValue:"last_trade_timestamp",show_name:O.showName,metadata_uri:O.metadataUri,bonding_curve:O.bondingCurve,associated_bonding_curve:O.associatedBondingCurve,created_timestamp:O.createdTimestamp,raydium_pool:O.raydium_pool,complete:O.complete,hidden:O.hidden,virtual_sol_reserves:O.virtualSolReserves,virtual_token_reserves:O.virtualTokenReserves,total_supply:O.totalSupply,market_cap:O.market_cap,usd_market_cap:O.usd_market_cap,king_of_the_hill_timestamp:O.king_of_the_hill_timestamp,reply_count:O.reply_count,nsfw:O.nsfw,inverted:O.inverted,market_id:O.market_id};a.unshift(e)}a.length>50&&("DESC"===s?a.pop():a.shift()),C(a.filter((e,t,s)=>s.findIndex(t=>t.mint===e.mint)===t)),I(O.mint),R.current=O,setTimeout(()=>I(""),700)}},[O,e,s,d,z]),(0,a.jsxs)("div",{className:"grid h-fit md:gap-12 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center w-full mt-4",children:[(0,a.jsx)(n.z,{variant:"ghost",asChild:!0,className:"mb-4 text-2xl text-slate-50 hover:font-bold hover:bg-transparent hover:text-slate-50",children:(0,a.jsx)(i(),{href:"/create",children:"[start a new coin]"})}),(0,a.jsx)(S,{})]}),(0,a.jsx)("div",{className:"w-full grid justify-items-center px-2 sm:p-0",children:(0,a.jsx)(w.I,{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"search for token",className:"p-2 border border-gray-300 w-full max-w-[470px] bg-green-300 text-black border-none focus:border-none active:border-none"})}),(0,a.jsxs)("div",{className:"grid gap-6 md:gap-4 md:px-12 px-2",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("div",{className:"flex gap-4",children:[{label:"Following",value:"following"},{label:"Terminal",value:"terminal"}].map(e=>{let{label:t,value:s}=e;return(0,a.jsxs)("div",{onClick:()=>_(s),className:(0,P.Z)("grid gap-1 cursor-pointer",g===s?"text-green-300":"text-gray-500"),children:[t,g===s&&(0,a.jsx)("div",{className:"w-full h-1 bg-green-300 rounded"})]},s)})}),"terminal"===g&&(0,a.jsxs)("div",{className:"grid sm:flex gap-4 w-full items-center",children:["terminal"===g&&(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)(f,{value:e,onValueChange:t,children:[(0,a.jsx)(p,{"aria-label":"Sort",className:"bg-green-300 text-black border-none focus:border-none active:border-none",children:(0,a.jsx)(x,{})}),(0,a.jsxs)(v,{className:"bg-green-300",children:[(0,a.jsx)(j,{value:"last_trade_timestamp",children:"sort: bump order"}),(0,a.jsx)(j,{value:"last_reply",children:"sort: last reply"}),(0,a.jsx)(j,{value:"reply_count",children:"sort: reply count"}),(0,a.jsx)(j,{value:"market_cap",children:"sort: market cap"}),(0,a.jsx)(j,{value:"created_timestamp",children:"sort: creation time"})]})]}),(0,a.jsxs)(f,{value:s,onValueChange:l,children:[(0,a.jsx)(p,{"aria-label":"Order",className:"bg-green-300 text-black border-none focus:border-none active:border-none",children:(0,a.jsx)(x,{})}),(0,a.jsxs)(v,{className:"bg-green-300",children:[(0,a.jsx)(j,{value:"ASC",children:"order: asc"}),(0,a.jsx)(j,{value:"DESC",children:"order: desc"})]})]})]}),"terminal"===g&&(0,a.jsxs)("div",{className:"md:grid flex flex-wrap text-sm md:gap-1 gap-4",children:["terminal"===g&&(0,a.jsxs)("div",{className:"flex gap-1 h-fit items-center text-white",children:[(0,a.jsx)("div",{children:"Show animations:"}),(0,a.jsx)("div",{onClick:()=>A(!0),className:(0,P.Z)("cursor-pointer px-1 rounded",z&&"bg-green-300 text-black",!z&&"hover:bg-gray-800 text-gray-500"),children:"On"}),(0,a.jsx)("div",{onClick:()=>A(!1),className:(0,P.Z)("cursor-pointer px-1 rounded",!z&&"bg-green-300 text-black",z&&"hover:bg-gray-800 text-gray-500"),children:"Off"})]}),"terminal"===g&&(0,a.jsxs)("div",{className:"flex gap-1 h-fit items-center text-white",children:[(0,a.jsx)("div",{children:"Include nsfw:"}),(0,a.jsx)("div",{onClick:()=>h(!0),className:(0,P.Z)("cursor-pointer px-1 rounded",u&&"bg-green-300 text-black",!u&&"hover:bg-gray-800 text-gray-500"),children:"On"}),(0,a.jsx)("div",{onClick:()=>h(!1),className:(0,P.Z)("cursor-pointer px-1 rounded",!u&&"bg-green-300 text-black",u&&"hover:bg-gray-800 text-gray-500"),children:"Off"})]})]})]})]}),"terminal"===g&&(0,a.jsx)("div",{className:"grid grid-col-1 md:grid-cols-2 lg:grid-cols-3 text-gray-400 gap-4",children:k.filter((e,t,s)=>s.findIndex(t=>t.mint===e.mint)===t).map(e=>(0,a.jsx)(Z.u,{coin:e,shouldAnimate:e.mint===D},e.mint))}),"following"===g&&(0,a.jsx)(L,{}),"terminal"===g&&(0,a.jsx)("div",{className:"w-full flex justify-center mt-4",children:(0,a.jsx)("div",{className:"justify-self-end mb-20",children:(0,a.jsxs)("div",{className:"flex justify-center space-x-2 text-slate-50",children:[(0,a.jsx)("button",{disabled:0==o,onClick:()=>m(o-50),className:"text-sm ".concat(0==o?"text-slate-400 cursor-not-allowed":"text-slate-50 hover:font-bold hover:bg-transparent hover:text-slate-50"),children:"[ << ]"}),(0,a.jsx)("span",{children:Math.ceil(o/50)+1}),(0,a.jsx)("button",{disabled:(null==k?void 0:k.length)%50!=0,onClick:()=>m(o+50),className:"text-sm ".concat((null==k?void 0:k.length)%50!=0?"text-slate-400 cursor-not-allowed":"text-slate-50 hover:font-bold hover:bg-transparent hover:text-slate-50"),children:"[ >> ]"})]})})})]})]})}},67334:function(e,t,s){"use strict";s.d(t,{A:function(){return l}});var a=s(2265),r=s(89328);let l=()=>{let[e,t]=(0,a.useState)(null),s=(0,r.useSocket)();return(0,a.useEffect)(()=>{if(!s)return;let e=e=>{console.log("trade",e),t(e)};return s.on("tradeCreated",e),()=>{s.off("tradeCreated",e)}},[s]),{latestTrade:e}}},89328:function(e,t,s){"use strict";s.r(t),s.d(t,{SocketProvider:function(){return c},useSocket:function(){return d}});var a=s(57437),r=s(50439),l=s(2265),i=s(63388);let n=(0,l.createContext)(null),d=()=>(0,l.useContext)(n),c=e=>{let{children:t}=e,s=(0,r.O_)(),d=(0,l.useMemo)(()=>s?(0,i.ZP)("https://client-api-2-74b1891ee9f9.herokuapp.com",{transports:["websocket"]}):null,[s]);return(0,a.jsx)(n.Provider,{value:d,children:t})}},68368:function(e,t,s){"use strict";s.d(t,{s:function(){return r}});var a=s(63438);let r=e=>e.toNumber()/a.LAMPORTS_PER_SOL}},function(e){e.O(0,[3814,9571,7017,4684,3178,1806,5481,5546,3388,7649,6857,311,4407,2971,4938,1744],function(){return e(e.s=11109)}),_N_E=e.O()}]);